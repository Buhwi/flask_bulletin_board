<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Posts</title>
</head>
<body>
    <h1>Posts</h1>
    {% if current_user.is_authenticated %}
        <p>Welcome, {{ current_user.name }}!</p>
        <a href="{{ url_for('routes.logout') }}">Logout</a>
        {% if current_user.id == 1 %}
            <a href="{{ url_for('routes.create_post') }}">Create Post</a>
        {% endif %}
    {% else %}
        <a href="{{ url_for('routes.login') }}">Login</a>
        <a href="{{ url_for('routes.register') }}">Register</a>
    {% endif %}
    <ul>
        {% for post in posts %}
        <li>
            <h2>{{ post['title'] }}</h2>
            <p>{{ post['content'] }}</p>
            {% if post['image'] %}
                <img src="{{ url_for('static', filename='uploads/' ~ post['image']) }}" alt="Post Image" style="max-width: 200px;">
            {% endif %}
            {% if current_user.is_authenticated and current_user.id == 1 %}
                <a href="{{ url_for('routes.edit_post', post_id=post['id']) }}">Edit</a>
                <a href="{{ url_for('routes.delete_post', post_id=post['id']) }}">Delete</a>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
</body>
</html>
